const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ChatMessage-Du4ouoTe.js","assets/chat-components-twU1EorO.js","assets/rolldown-runtime-BBZsY560.js"])))=>i.map(i=>d[i]);
import{a as e}from"./rolldown-runtime-BBZsY560.js";import{i as t,n,r,v as o}from"./chat-components-twU1EorO.js";import{a,c as i,d as s,f as c,g as l,h as d,i as u,l as g,m as p,n as h,o as m,p as x,r as f,s as v,t as b,u as S}from"./react-vendor-nVHQ4dDq.js";import{t as y}from"./services--WtXQo_-.js";var C=e(o());const j=(0,C.createContext)(void 0),N=()=>{const e=(0,C.useContext)(j);if(void 0===e)throw new Error("useUser must be used within a UserProvider");return e};var w=e(r()),k=t({modal:{maxWidth:"700px",width:"95vw",minWidth:"400px",maxHeight:"85vh",overflowY:"auto"},modalMobile:{width:"100vw",height:"100vh",maxWidth:"none",maxHeight:"none",borderRadius:"0"},formGroup:{marginBottom:n.spacingVerticalXL},formLabel:{display:"block",marginBottom:n.spacingVerticalS,fontWeight:n.fontWeightMedium,color:n.colorNeutralForeground1,fontSize:n.fontSizeBase300},inputWithButton:{display:"flex",gap:n.spacingHorizontalS,alignItems:"stretch",width:"100%"},inputFlex:{flex:1},generateUuidBtn:{backgroundColor:n.colorNeutralBackground3,border:`1px solid ${n.colorNeutralStroke2}`,color:n.colorNeutralForeground1,padding:`${n.spacingVerticalS} ${n.spacingHorizontalM}`,borderRadius:n.borderRadiusMedium,cursor:"pointer",transition:`all ${n.durationNormal}`,display:"flex",alignItems:"center",justifyContent:"center",minWidth:"50px",flexShrink:0,":hover":{backgroundColor:n.colorNeutralBackground4}},fileUploadArea:{border:`2px dashed ${n.colorNeutralStroke2}`,borderRadius:n.borderRadiusMedium,padding:n.spacingVerticalXXL,textAlign:"center",transition:`border-color ${n.durationNormal}`,cursor:"pointer",position:"relative",minHeight:"120px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:n.spacingVerticalS},fileUploadAreaHover:{},fileUploadAreaDragOver:{backgroundColor:n.colorBrandBackground2},uploadIcon:{fontSize:n.fontSizeBase600,marginBottom:n.spacingVerticalXXS,display:"block"},fileName:{marginTop:n.spacingVerticalS,fontWeight:n.fontWeightMedium,color:n.colorNeutralForeground1,fontSize:n.fontSizeBase200},indexStatus:{textAlign:"center",minHeight:"24px",fontSize:n.fontSizeBase300,marginTop:n.spacingVerticalM,padding:`${n.spacingVerticalXS} ${n.spacingHorizontalM}`,borderRadius:n.borderRadiusSmall,backgroundColor:n.colorNeutralBackground2},indexStatusSuccess:{color:n.colorStatusSuccessForeground1},indexStatusError:{color:n.colorStatusDangerForeground1},indexStatusInfo:{color:n.colorBrandForeground1},dialogActions:{paddingTop:n.spacingVerticalL,gap:n.spacingHorizontalM,justifyContent:"flex-end"}});const I=({isOpen:e,onClose:t})=>{const r=k(),{userId:o}=N(),[s,c]=(0,C.useState)(""),[l,d]=(0,C.useState)(""),[x,j]=(0,C.useState)(null),[I,B]=(0,C.useState)(!1),[z,M]=(0,C.useState)(""),[E,D]=(0,C.useState)(!1),[$,U]=(0,C.useState)(!1);C.useEffect(()=>{const e=()=>{U(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const V=[r.modal,$&&r.modalMobile].filter(Boolean).join(" ");return(0,w.jsx)(m,{open:e,onOpenChange:(e,n)=>!n.open&&t(),children:(0,w.jsx)(h,{className:V,children:(0,w.jsxs)(u,{children:[(0,w.jsx)(f,{children:"L·∫≠p ch·ªâ m·ª•c n·ªôi dung cu·ªôc h·ªçp"}),(0,w.jsxs)(b,{children:[(0,w.jsxs)("div",{className:r.formGroup,children:[(0,w.jsx)("label",{className:r.formLabel,htmlFor:"meeting-id",children:"ID cu·ªôc h·ªçp:"}),(0,w.jsxs)("div",{className:r.inputWithButton,children:[(0,w.jsx)(g,{className:r.inputFlex,id:"meeting-id",value:s,onChange:(e,t)=>c(t.value),placeholder:"Nh·∫≠p ID cu·ªôc h·ªçp (v√≠ d·ª•: meeting-123)",required:!0}),(0,w.jsx)("button",{type:"button",className:r.generateUuidBtn,onClick:()=>{const e=y.generateUUID();c(e)},title:"T·∫°o UUID ng·∫´u nhi√™n",children:(0,w.jsx)(p,{})})]})]}),(0,w.jsxs)("div",{className:r.formGroup,children:[(0,w.jsx)("label",{className:r.formLabel,htmlFor:"meeting-transcript",children:"B·∫£n ghi cu·ªôc h·ªçp:"}),(0,w.jsx)(v,{id:"meeting-transcript",value:l,onChange:(e,t)=>d(t.value),placeholder:"D√°n b·∫£n ghi cu·ªôc h·ªçp ·ªü ƒë√¢y...",rows:8,resize:"vertical",style:{width:"100%"}})]}),(0,w.jsxs)("div",{className:r.formGroup,children:[(0,w.jsx)("label",{className:r.formLabel,children:"T·ªáp ghi ch√∫ cu·ªôc h·ªçp:"}),(0,w.jsxs)("div",{className:`${r.fileUploadArea} ${I?r.fileUploadAreaDragOver:""}`,onDrop:e=>{e.preventDefault(),B(!1);const t=e.dataTransfer.files;t.length>0&&j(t[0])},onDragOver:e=>{e.preventDefault(),B(!0)},onDragLeave:()=>B(!1),onClick:()=>document.getElementById("notes-file")?.click(),children:[(0,w.jsx)("span",{className:r.uploadIcon,children:"üìé"}),(0,w.jsx)(i,{children:"Nh·∫•p ƒë·ªÉ ch·ªçn ho·∫∑c k√©o th·∫£ t·ªáp"}),(0,w.jsx)(i,{style:{fontSize:n.fontSizeBase200,opacity:.7},children:"H·ªó tr·ª£: .txt, .pdf, .doc, .docx"}),(0,w.jsx)("input",{id:"notes-file",type:"file",style:{display:"none"},onChange:e=>{const t=e.target.files;t&&t.length>0&&j(t[0])},accept:".txt,.pdf,.doc,.docx"}),x&&(0,w.jsxs)("div",{className:r.fileName,children:["ƒê√£ ch·ªçn: ",x.name]})]})]}),z&&(0,w.jsx)("div",{className:r.indexStatus,children:(0,w.jsx)(i,{className:z.includes("successfully")?r.indexStatusSuccess:z.includes("error")||z.includes("Error")?r.indexStatusError:r.indexStatusInfo,children:z})})]}),(0,w.jsxs)(a,{className:r.dialogActions,children:[(0,w.jsx)(S,{appearance:"secondary",onClick:()=>{c(""),d(""),j(null),M(""),t()},disabled:E,children:"H·ªßy"}),(0,w.jsx)(S,{appearance:"primary",onClick:async()=>{if(s.trim())if(l.trim()||x){D(!0),M("ƒêang l·∫≠p ch·ªâ m·ª•c n·ªôi dung cu·ªôc h·ªçp...");try{const e=await y.indexMeeting({meeting_id:s.trim(),transcript:l.trim()||void 0,meeting_note_file:x||void 0,current_user_id:o});if(!e.success)throw new Error(e.message||"Failed to index meeting");M(`ƒê√£ l·∫≠p ch·ªâ m·ª•c th√†nh c√¥ng cu·ªôc h·ªçp: ${e.data?.processed_items?.join(", ")}`),setTimeout(()=>{t(),c(""),d(""),j(null),M("")},2e3)}catch(e){console.error("Error indexing meeting:",e),M(`L·ªói: ${e.message}`)}finally{D(!1)}}else M("Vui l√≤ng cung c·∫•p b·∫£n ghi ho·∫∑c t·ªáp ghi ch√∫ cu·ªôc h·ªçp");else M("Vui l√≤ng nh·∫≠p ID cu·ªôc h·ªçp")},disabled:!s||E,children:E?"ƒêang l·∫≠p ch·ªâ m·ª•c...":"L·∫≠p ch·ªâ m·ª•c cu·ªôc h·ªçp"})]})]})})})};
/*! js-cookie v3.0.5 | MIT */function B(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}var z=function e(t,n){function r(e,r,o){if("undefined"!=typeof document){"number"==typeof(o=B({},n,o)).expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var i in o)o[i]&&(a+="; "+i,!0!==o[i]&&(a+="="+o[i].split(";")[0]));return document.cookie=e+"="+t.write(r,e)+a}}return Object.create({set:r,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],r={},o=0;o<n.length;o++){var a=n[o].split("="),i=a.slice(1).join("=");try{var s=decodeURIComponent(a[0]);if(r[s]=t.read(i,s),e===s)break}catch(c){}}return e?r[e]:r}},remove:function(e,t){r(e,"",B({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,B({},this.attributes,t))},withConverter:function(t){return e(B({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"}),M="chat_user_id",E=class{static getUserId(){return z.get(M)||"4c3b4f0f-8d99-42cd-9676-8a16a974c507"}static setUserId(e){e&&e.trim()&&z.set(M,e.trim(),{expires:30,sameSite:"strict"})}static clearUserId(){z.remove(M)}static generateNewUserId(){return"undefined"!=typeof crypto&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}static hasUserId(){return!!z.get(M)}},D=t({sidebar:{width:"320px",minWidth:"280px",backgroundColor:n.colorNeutralBackground1,borderRight:`1px solid ${n.colorNeutralStroke2}`,display:"flex",flexDirection:"column",overflow:"hidden",transition:`all ${n.durationNormal}`,position:"relative"},sidebarCollapsed:{width:"0px",minWidth:"0px",opacity:0,transform:"translateX(-100%)",pointerEvents:"none"},sidebarMobile:{position:"fixed",top:"0",left:"0",height:"100%",zIndex:1e3,boxShadow:n.shadow64,transform:"translateX(-100%)"},sidebarMobileOpen:{transform:"translateX(0%)"},sidebarHeader:{padding:n.spacingVerticalL,borderBottom:`1px solid ${n.colorNeutralStroke2}`,backgroundColor:n.colorNeutralBackground2,display:"flex",flexDirection:"column",gap:n.spacingVerticalS},sidebarTitle:{fontSize:n.fontSizeBase400,fontWeight:n.fontWeightSemibold,color:n.colorNeutralForeground1,marginBottom:n.spacingVerticalM},userIdContainer:{display:"flex",flexDirection:"column",gap:n.spacingVerticalXXS},userIdLabel:{fontSize:n.fontSizeBase200,fontWeight:n.fontWeightMedium,color:n.colorNeutralForeground2,textTransform:"uppercase",letterSpacing:"0.5px"},userIdInputWrapper:{display:"flex",gap:n.spacingHorizontalXS,alignItems:"center"},userIdInput:{flex:1},generateUuidBtn:{minWidth:"40px",padding:n.spacingHorizontalXS},newChatBtn:{width:"100%",marginTop:n.spacingVerticalXS},indexMeetingBtn:{width:"100%",marginTop:n.spacingVerticalXS},conversationsList:{flex:1,overflowY:"auto",padding:`${n.spacingVerticalXS} 0`},conversationItem:{padding:`${n.spacingVerticalM} ${n.spacingVerticalL}`,borderBottom:`1px solid ${n.colorNeutralStroke3}`,cursor:"pointer",transition:`background-color ${n.durationNormal}`,":hover":{backgroundColor:n.colorNeutralBackground3}},conversationItemActive:{backgroundColor:n.colorBrandBackground2,borderLeft:`3px solid ${n.colorBrandStroke1}`},conversationTitle:{fontSize:n.fontSizeBase300,fontWeight:n.fontWeightMedium,color:n.colorNeutralForeground1,marginBottom:n.spacingVerticalXXS,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},conversationMeta:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:n.fontSizeBase200,color:n.colorNeutralForeground2},messageCount:{backgroundColor:n.colorNeutralBackground4,padding:`${n.spacingVerticalXXS} ${n.spacingHorizontalXS}`,borderRadius:n.borderRadiusCircular,fontSize:n.fontSizeBase100}});const $=({isOpen:e,isMobile:t,onToggle:r,activeConversationId:o,onConversationSelect:a})=>{const s=D(),{userId:u,setUserId:h}=N(),[m,x]=(0,C.useState)([]),[f,v]=(0,C.useState)(!1),[b,j]=(0,C.useState)(!1);(0,C.useEffect)(()=>{k()},[u]);const k=async()=>{j(!0);try{const e=await y.getConversations();x(e)}catch(e){console.error("Error loading conversations:",e)}finally{j(!1)}},B=[s.sidebar,!e&&s.sidebarCollapsed,t&&s.sidebarMobile,t&&e&&s.sidebarMobileOpen].filter(Boolean).join(" ");return(0,w.jsxs)("div",{className:B,children:[t&&e&&(0,w.jsx)("div",{style:{position:"fixed",top:0,left:"320px",right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:999},onClick:r}),(0,w.jsxs)("div",{className:s.sidebarHeader,children:[(0,w.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:n.spacingVerticalM},children:[(0,w.jsx)(i,{className:s.sidebarTitle,children:"Cu·ªôc tr√≤ chuy·ªán"}),t&&(0,w.jsx)(S,{icon:(0,w.jsx)(c,{}),onClick:r,size:"small",appearance:"subtle"})]}),(0,w.jsxs)("div",{className:s.userIdContainer,children:[(0,w.jsx)(i,{className:s.userIdLabel,children:"ID ng∆∞·ªùi d√πng:"}),(0,w.jsxs)("div",{className:s.userIdInputWrapper,children:[(0,w.jsx)(g,{className:s.userIdInput,value:u,onChange:(e,t)=>h(t.value),placeholder:"Nh·∫≠p ID ng∆∞·ªùi d√πng c·ªßa b·∫°n"}),(0,w.jsx)(S,{className:s.generateUuidBtn,icon:(0,w.jsx)(p,{}),onClick:()=>{const e=E.generateNewUserId();E.setUserId(e),h(e)},title:"T·∫°o UUID ng·∫´u nhi√™n"})]})]}),(0,w.jsx)(S,{className:s.newChatBtn,icon:(0,w.jsx)(l,{}),onClick:async()=>{j(!0);try{const e=await y.createConversation("New Conversation");x(t=>[e,...t]),a&&a(e.id)}catch(e){console.error("Error creating conversation:",e)}finally{j(!1)}},children:"Tr√≤ chuy·ªán m·ªõi"}),(0,w.jsx)(S,{className:s.indexMeetingBtn,icon:(0,w.jsx)(d,{}),onClick:()=>{v(!0)},children:"L·∫≠p ch·ªâ m·ª•c cu·ªôc h·ªçp"})]}),(0,w.jsx)("div",{className:s.conversationsList,children:b?(0,w.jsx)("div",{style:{padding:n.spacingVerticalL,textAlign:"center"},children:(0,w.jsx)(i,{children:"ƒêang t·∫£i cu·ªôc tr√≤ chuy·ªán..."})}):0===m.length?(0,w.jsx)("div",{style:{padding:n.spacingVerticalL,textAlign:"center"},children:(0,w.jsx)(i,{children:"Ch∆∞a c√≥ cu·ªôc tr√≤ chuy·ªán n√†o"})}):m.map(e=>(0,w.jsxs)("div",{className:`${s.conversationItem} ${o===e.id?s.conversationItemActive:""}`,onClick:()=>{return t=e.id,void(a&&a(t));var t},children:[(0,w.jsx)(i,{className:s.conversationTitle,children:e.title||"Cu·ªôc tr√≤ chuy·ªán ch∆∞a c√≥ ti√™u ƒë·ªÅ"}),(0,w.jsxs)("div",{className:s.conversationMeta,children:[(0,w.jsx)(i,{children:y.formatDate(e.updated_at)}),e.message_count&&e.message_count>0&&(0,w.jsx)("span",{className:s.messageCount,children:e.message_count})]})]},e.id))}),(0,w.jsx)(I,{isOpen:f,onClose:()=>{v(!1)}})]})};var U={};var V=(0,C.lazy)(()=>function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){const e=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),i=a?.nonce||a?.getAttribute("nonce");o=t.map(t=>{if((t=function(e){return"/"+e}(t))in U)return;U[t]=!0;const r=t.endsWith(".css"),o=r?'[rel="stylesheet"]':"";if(n)for(let n=e.length-1;n>=0;n--){const o=e[n];if(o.href===t&&(!r||"stylesheet"===o.rel))return}else if(document.querySelector(`link[href="${t}"]${o}`))return;const a=document.createElement("link");return a.rel=r?"stylesheet":"modulepreload",r||(a.as="script"),a.crossOrigin="",a.href=t,i&&a.setAttribute("nonce",i),document.head.appendChild(a),r?new Promise((e,n)=>{a.addEventListener("load",e),a.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${t}`)))}):void 0}),r=Promise.all(o.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))}var o;function a(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(const e of t||[])"rejected"===e.status&&a(e.reason);return e().catch(a)})}(()=>import("./ChatMessage-Du4ouoTe.js"),__vite__mapDeps([0,1,2])).then(e=>({default:e.ChatMessage}))),L=t({chatMain:{flex:1,display:"flex",flexDirection:"column",backgroundColor:n.colorNeutralBackground1,overflow:"hidden",width:"100%"},chatMainFullWidth:{width:"100%"},chatHeader:{padding:`${n.spacingVerticalL} ${n.spacingVerticalL}`,borderBottom:`1px solid ${n.colorNeutralStroke2}`,backgroundColor:n.colorNeutralBackground2,display:"flex",alignItems:"center",justifyContent:"space-between",gap:n.spacingHorizontalS},mobileToggleButton:{display:"none","@media (max-width: 767px)":{display:"flex"}},conversationTitleDisplay:{fontSize:n.fontSizeBase400,fontWeight:n.fontWeightSemibold,color:n.colorNeutralForeground1,display:"flex",alignItems:"center",gap:n.spacingHorizontalS},connectionStatus:{width:"12px",height:"12px",borderRadius:"50%",display:"inline-block"},connectionStatusConnected:{backgroundColor:n.colorStatusSuccessBackground1},connectionStatusDisconnected:{backgroundColor:n.colorStatusDangerBackground1},chatMessages:{flex:1,overflowY:"auto",padding:n.spacingVerticalL},messagesContainer:{display:"flex",flexDirection:"column",gap:n.spacingVerticalM},messageItem:{display:"flex",flexDirection:"column",gap:n.spacingVerticalXXS},messageContent:{padding:n.spacingVerticalS,borderRadius:n.borderRadiusMedium,maxWidth:"70%",wordWrap:"break-word"},messageUser:{alignSelf:"flex-end",backgroundColor:n.colorBrandBackground,color:n.colorNeutralForegroundOnBrand},messageAssistant:{alignSelf:"flex-start",backgroundColor:n.colorNeutralBackground3,color:n.colorNeutralForeground1},typingIndicator:{padding:`${n.spacingVerticalS} ${n.spacingVerticalL}`,fontSize:n.fontSizeBase300,color:n.colorNeutralForeground2,fontStyle:"italic"},messageInputArea:{padding:n.spacingVerticalL,borderTop:`1px solid ${n.colorNeutralStroke2}`,backgroundColor:n.colorNeutralBackground1},messageInputContainer:{display:"flex",gap:n.spacingHorizontalS,alignItems:"flex-end"},messageInput:{flex:1,minHeight:"44px",resize:"none"},sendBtn:{minHeight:"44px"}});const W=({sidebarOpen:e,isMobile:t,onToggleSidebar:r,activeConversationId:o})=>{const a=L(),c=[a.chatMain,!e&&!t&&a.chatMainFullWidth].filter(Boolean).join(" "),[l,d]=(0,C.useState)([]),[u,g]=(0,C.useState)(""),[p,h]=(0,C.useState)(!1),[m,f]=(0,C.useState)(!1),[b,j]=(0,C.useState)("Ch·ªçn m·ªôt cu·ªôc tr√≤ chuy·ªán ƒë·ªÉ b·∫Øt ƒë·∫ßu chat"),[N,k]=(0,C.useState)(null),I=(0,C.useRef)(null),B=(0,C.useRef)(null);(0,C.useEffect)(()=>{I.current?.scrollIntoView({behavior:"smooth"})},[l]),(0,C.useEffect)(()=>(o?(z(o),M(o)):(d([]),j("Ch·ªçn m·ªôt cu·ªôc tr√≤ chuy·ªán ƒë·ªÉ b·∫Øt ƒë·∫ßu chat"),E()),()=>{E()}),[o]),(0,C.useEffect)(()=>()=>{E()},[]);const z=async e=>{try{h(!0);const t=await y.getConversationMessages(e);d(t),j("Cu·ªôc tr√≤ chuy·ªán ƒëang ho·∫°t ƒë·ªông")}catch(t){console.error("Error loading conversation messages:",t),j("L·ªói khi t·∫£i cu·ªôc tr√≤ chuy·ªán")}finally{h(!1)}},M=e=>{E();try{const t=y.connectToConversation(e,e=>{d(t=>[...t,e]),h(!1)});k(t),f(!0)}catch(t){console.error("Error connecting to real-time updates:",t),f(!1)}},E=()=>{N&&(y.disconnectSSE(N),k(null),f(!1))},D=async()=>{if(!u.trim()||!o)return;const e=u.trim();g(""),B.current&&(B.current.style.height="auto");const t=y.parseMentions(e),n={id:`temp-${Date.now()}`,message_type:"user",content:e,created_at:(new Date).toISOString()};d(e=>[...e,n]);try{h(!0),await y.sendMessage(o,{content:e,mentions:t})}catch(r){console.error("Error sending message:",r),h(!1),d(e=>e.filter(e=>e.id!==n.id)),g(e)}};return(0,w.jsxs)("div",{className:c,children:[(0,w.jsx)("div",{className:a.chatHeader,children:(0,w.jsxs)("div",{className:a.conversationTitleDisplay,children:[t&&(0,w.jsx)(S,{className:a.mobileToggleButton,icon:(0,w.jsx)(x,{}),onClick:r,size:"small",appearance:"subtle"}),(0,w.jsx)("span",{className:`${a.connectionStatus} ${m?a.connectionStatusConnected:a.connectionStatusDisconnected}`,title:m?"ƒê√£ k·∫øt n·ªëi":"M·∫•t k·∫øt n·ªëi"}),(0,w.jsx)(i,{children:b})]})}),(0,w.jsx)("div",{className:a.chatMessages,children:(0,w.jsxs)("div",{className:a.messagesContainer,children:[l.map(e=>(0,w.jsx)(C.Suspense,{fallback:(0,w.jsx)("div",{style:{padding:n.spacingVerticalM,textAlign:"center"},children:"ƒêang t·∫£i tin nh·∫Øn..."}),children:(0,w.jsx)(V,{message:e,user:void 0})},e.id)),(0,w.jsx)("div",{ref:I})]})}),p&&(0,w.jsx)("div",{className:a.typingIndicator,children:"AI ƒëang nh·∫≠p..."}),(0,w.jsx)("div",{className:a.messageInputArea,children:(0,w.jsxs)("div",{className:a.messageInputContainer,children:[(0,w.jsx)(v,{ref:B,className:a.messageInput,value:u,onChange:e=>{g(e.target.value),B.current&&(B.current.style.height="auto",B.current.style.height=B.current.scrollHeight+"px")},onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),D())},placeholder:"Nh·∫≠p tin nh·∫Øn c·ªßa b·∫°n ·ªü ƒë√¢y... (Nh·∫•n Enter ƒë·ªÉ g·ª≠i, Shift+Enter ƒë·ªÉ xu·ªëng d√≤ng)",rows:1}),(0,w.jsx)(S,{className:a.sendBtn,icon:(0,w.jsx)(s,{}),onClick:D,disabled:!u.trim(),children:"G·ª≠i"})]})})]})};var T=t({chatContainer:{display:"flex",height:"100vh",width:"100%",backgroundColor:n.colorNeutralBackground1,boxShadow:n.shadow16,position:"relative"},chatContainerEmbedded:{borderRadius:n.borderRadiusMedium,overflow:"hidden"}});const A=({isEmbedded:e=!1})=>{const t=T(),[n,r]=(0,C.useState)(!1),[o,a]=(0,C.useState)(!0),[i,s]=(0,C.useState)(null);(0,C.useEffect)(()=>{const e=()=>{r(window.innerWidth<768),window.innerWidth<768?a(!1):a(!0)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const c=()=>{a(!o)},l=e=>{s(e)};return(0,w.jsxs)("div",{className:`${t.chatContainer} ${e?t.chatContainerEmbedded:""}`,children:[(0,w.jsx)($,{isOpen:o,isMobile:n,onToggle:c,activeConversationId:i,onConversationSelect:l}),(0,w.jsx)(W,{sidebarOpen:o,isMobile:n,onToggleSidebar:c,activeConversationId:i,onConversationChange:l})]})};export{E as n,j as r,A as t};